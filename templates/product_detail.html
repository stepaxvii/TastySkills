{% extends "base.html" %}

{% block title %}{{ product.title }} - {{ product.category.title }}{% if is_demo %} - –î–µ–º–æ{% endif %}{% endblock %}

{% block breadcrumb_items %}
    {% if is_demo %}
    <li class="breadcrumb-item"><a href="/demo">–î–µ–º–æ-—Ä–µ—Å—Ç–æ—Ä–∞–Ω</a></li>
    <li class="breadcrumb-item"><a href="/sections/{{ product.category.section.id }}">{{ product.category.section.name }}</a></li>
    <li class="breadcrumb-item"><a href="/categories/{{ product.category.id }}">{{ product.category.title }}</a></li>
    <li class="breadcrumb-item active" aria-current="page"><span>{{ product.title }}</span></li>
    {% else %}
    {% if user and user.role == 'admin' %}
    <li class="breadcrumb-item"><a href="/restaurants">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</a></li>
    {% endif %}
    <li class="breadcrumb-item"><a href="/restaurants/{{ product.restaurant.id }}">{{ product.restaurant.name }}</a></li>
    <li class="breadcrumb-item"><a href="/sections/{{ product.category.section.id }}">{{ product.category.section.name }}</a></li>
    <li class="breadcrumb-item"><a href="/categories/{{ product.category.id }}">{{ product.category.title }}</a></li>
    <li class="breadcrumb-item active" aria-current="page"><span>{{ product.title }}</span></li>
    {% endif %}
{% endblock %}

{% block content %}
<div class="product-page-container">
    <div class="product-header">
        <h1>{{ product.title }}</h1>
    </div>

    {% if user and user.role in ['admin', 'manager'] %}
    <div class="product-management">
        <a href="/manage/products/edit/{{ product.id }}" class="btn btn-warning btn-lg">
            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª—é–¥–æ
        </a>
        <button type="button" class="btn btn-danger btn-lg" 
                data-delete-url="/manage/products/delete/{{ product.id }}"
                data-delete-message="–£–¥–∞–ª–∏—Ç—å –±–ª—é–¥–æ ¬´{{ product.title }}¬ª? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.">
            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –±–ª—é–¥–æ
        </button>
    </div>
    {% endif %}

    <div class="product-layout">
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: —Ñ–æ—Ç–æ -->
        <div class="product-image-container">
            <div class="product-image">üì∏</div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="product-side-info">
            {% if product.weight %}
            <div class="product-info-card">
                <h4>‚öñÔ∏è –í—ã—Ö–æ–¥</h4>
                <p>{{ product.weight }}</p>
            </div>
            {% endif %}

            {% if product.allergens %}
            <div class="product-info-card">
                <h4>‚ö†Ô∏è –ê–ª–ª–µ—Ä–≥–µ–Ω—ã</h4>
                <p>{{ product.allergens }}</p>
            </div>
            {% endif %}

            {% if product.gastronomic_pairings %}
            <div class="product-info-card">
                <h4>üç∑ –ì–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è</h4>
                <p>{{ product.gastronomic_pairings }}</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–¥ —Ñ–æ—Ç–æ -->
    <div class="product-main-content">
        <div class="product-info-card">
            <h4>ü•ò –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</h4>
            <p>{{ product.ingredients }}</p>
        </div>

        {% if product.description %}
        <div class="product-info-card">
            <h4>üë®‚Äçüç≥ –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è</h4>
            <p>{{ product.description }}</p>
        </div>
        {% endif %}

        {% if product.features %}
        <div class="product-info-card">
            <h4>‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –±–ª—é–¥–∞</h4>
            <p>{{ product.features }}</p>
        </div>
        {% endif %}

        {% if product.table_setting %}
        <div class="product-info-card">
            <h4>üçΩÔ∏è –ü–æ–¥–∞—á–∞</h4>
            <p>{{ product.table_setting }}</p>
        </div>
        {% endif %}
    </div>

    <div class="back-button-container">
        <a href="/categories/{{ product.category.id }}" class="btn-back">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
const cards = document.querySelectorAll('.card');
cards.forEach((card, i) => {
    card.style.opacity = 0;
    setTimeout(() => {
        card.style.transition = 'opacity 0.5s';
        card.style.opacity = 1;
    }, 100 + i * 150);
});
</script>
{% endblock %}

{% include 'components/delete_modal.html' %} 